# Kemono Downloader Release Notes

## v5.5.1 (3 November 2025)
**feat: Fix and restored download completion for creator downloader**
- Fixed download completion to trigger finish on every posts downloaded.

## v5.5.0 (3 November 2025)
**feat: Added performance improvements and error fixes**
- [#45](https://github.com/VoxDroid/KemonoDownloader/pull/45) Performance improvements for UI elements and connection optimizations
- [#49] (https://github.com/VoxDroid/KemonoDownloader/pull/49) Improvements for edge cases on file completion handling and error fix for filter thread

## v5.4.0 (10 September 2025)
**feat: Added customizable retry count settings, fix thread settings, and improved download handling**
- [#39](https://github.com/VoxDroid/KemonoDownloader/pull/39) Add home folder permissions for Flatpak
- [#42](https://github.com/VoxDroid/KemonoDownloader/pull/42) Added customizable retry count settings in the settings page, removing the hardcoded values.
- [#44](https://github.com/VoxDroid/KemonoDownloader/pull/44) Improved download handling, counting and fetching files.
- Suppress MarkupResemblesLocatorWarning from BeautifulSoup

## v5.3.0 (28 August 2025)
**feat: Add .webp support for image previews and filters**
- Extended image preview, detection, and filter logic in creator_downloader.py and post_downloader.py to include .webp files alongside existing image formats.

## v5.2.0 (22 August 2025)
**feat: Added domain config support for coomer.st, Refactor logging, and completed translation for help documentation**
- Refactored creator_downloader.py and post_downloader.py to dynamically select API endpoints, referers, and base URLs based on the input URL's domain (kemono.cr or coomer.st).
- Replaced all direct string formatting in log messages with translation keys and parameterized calls to `translate()` throughout creator_downloader.py. Added corresponding translation keys and multi-language support for all log messages in kd_language.py.
- Added Simplified Chinese translations for all help/manual sections in kd_language.py
- Changed all English, Japanese, and Korean translation strings to reference Kemono.cr instead of Kemono.su, including URLs and descriptive text.

## v5.1.0 (20 August 2025)
**feat: Enhanced last page detection, expanded logging capabilities, and a new feature to open directories**
- Enhanced tracking to accurately detect the last page based on previous fetches, eliminating confusing "failed" messages.
- Added expand logs functionality for both creator and post downloader, improving debugging and user experience.
- Added an "Open Directory" button in the Settings tab to directly open the file explorer.

## v5.0.0 (17 August 2025)
**feat: Improve API request robustness and gzip handling**
- Enhances API request logic in creator_downloader.py and post_downloader.py by adding multiple endpoint attempts, robust header management, and retry mechanisms. 
- Adds gzip decompression for API responses, improves error handling and logging, and refactors code to use shared request and response parsing utilities. 
- Also updates UI logic for checkbox toggling and file preparation threads for better reliability.
- Add ".JPE" extension.

## v4.3.0 (28 July 2025)
**feat: Add auto rename functionality to both post and creator downloaders**
- Add auto rename checkbox to both downloader tabs with default enabled state
- Implement sequential file numbering (1_filename, 2_filename, etc.) when enabled
- Maintain original filename structure while adding numerical prefix for organization
- Update UI translations to support auto rename feature across all language files
- Preserve file extensions and handle edge cases for filename sanitization
- Add per-post file counter tracking for creator downloader to ensure proper sequencing

## v4.2.0 (28 July 2025)
**feat: Add 'CLIP' Extension and domain adjustment**
- Adjusted the domain from kemono.su to kemono.cr
- [#26](https://github.com/VoxDroid/KemonoDownloader/pull/26) [gitwawa1/main](https://github.com/VoxDroid/KemonoDownloader/commit/2cab17d63ea1e446edf64ad13455b09adb40be44)

## v4.1.0 (07 May 2025)
**feat: Partial Localization for Simplified Chinese**
- [#15](https://github.com/VoxDroid/KemonoDownloader/pull/15) [detached64/feature/zh-CN-localization](https://github.com/VoxDroid/KemonoDownloader/commit/8ad2cb2bb54de2a2e50c983959eb3df1fff0ed67)

## v4.0.0 (20 Apr 2025)
**feat: Overhaul CreatorDownloaderTab with async downloads and better error tracking**
Revamped `CreatorDownloaderTab` and `CreatorDownloadThread` to use async downloads, track failed files better, and log more details for debugging.
- Added `asyncio`, `aiohttp`, `ClientSession`, and `ClientTimeout` imports for async downloads.
- Switched `CreatorDownloadThread` to async with `aiohttp` for faster, smoother batch downloading.
- Removed "Download All Links" checkbox to focus on manual post selection.
- Added `self.failed_files` to `CreatorDownloaderTab` and `CreatorDownloadThread` to track failed files centrally.
- Improved `cleanup_thread`:
  - Logs thread removal and failed file transfers.
  - Moves failed files from `CreatorDownloadThread` to `self.failed_files`.
  - Counts failed files in completion check.
  - Cleans up leftover threads with better error handling.
  - Logs failed files and active threads.
- Updated `update_file_completion`:
  - Safely checks threads for failed file errors, defaults to "Unknown error".
  - Stores failed files in `self.failed_files`.
  - Adds `success` parameter to handle failures.
  - Triggers `creator_download_finished` when all files are done.
- Enhanced `CreatorDownloadThread`:
  - Fetches creator names and post titles for better folder naming.
  - Logs detailed download progress and errors.
- Added failed file summary in `creator_download_finished` for clearer feedback.
- Made console logs clearer, no more cluttered tracebacks.
- Remove trailing dots (Windows compatibility - sanitization for folder naming convention) for both `Creator Downloader` and `Post Downloader`.

## v3.9.1 (19 Apr 2025)
**fix: Ensure consistent post folder naming with {post_id}_{post_title} for all offsets**
Fixes the issue where post folders were named `{post_id}_Post_{post_id}` for posts beyond the first 50 due to missing pagination in title fetching.
- Added pagination to `fetch_creator_and_post_info` in `CreatorDownloadThread` to fetch titles for all posts across offsets.
- Ensures folder naming convention is `{post_id}_{post_title}` for all posts, matching `PostDetectionThread` pagination logic.
- Increased the maximum retries for downloading and fetching attempts from 5 to 50 for `Post Downloader` and `Creator Downloader`.

## v3.9.0 (17 Apr 2025)
**feat: Add {id}\_{post_title} and {id}\_{creator_name} folder naming for downloaders**
- Implemented `{id}_{post_title}` folder naming in `post_downloader.py`
- Implemented `{id}_{creator_name}` and `{id}_{post_title}` folder naming in `creator_downloader.py`
- Added methods to fetch post titles, creator names, and sanitize filenames
- Updated download logic for consistent file organization

## v3.8.0 (16 Apr 2025)
**feat: Add retry logic with countdown in post_downloader.py**
- Implemented 5-attempt retry with customizable 5-second countdown in `post_downloader.py` for `fetch_and_detect_files`.
- Added line-by-line countdown logging for each retry delay second.
- Introduced `retry_delay_seconds` variable for flexible retry timing.
- Enhanced error handling for HTTP 429 and exceptions with detailed retry logs.
- Maintained existing thread termination checks for consistency.

## v3.7.0 (16 Apr 2025)
**feat: Add retry logic and fix thread termination in downloaders**
- Implemented 5-attempt, 3-second countdown retry in `post_downloader.py` and `creator_downloader.py` for robust downloads.
- Resolved `ResourceWarning` in `post_downloader.py` with `with` statements.
- Fixed `RuntimeError` in `creator_downloader.py` by improving thread cleanup.
- Enhanced `cancel` methods to stop retries instantly with safe thread termination.
- Added translation keys for retry logging.
- Adjusted Max Simultaneous Downloads from 10 to 20

## v3.6.0 (09 Apr 2025)
**fix: ResourceWarnings and Select All in Downloader Tabs**
- Fixed `ResourceWarning` in `creator_downloader.py` with `with` statements for file hashing.
- Updated `CreatorDownloaderTab` to toggle "Select All" only for visible posts.
- Updated `PostDownloaderTab` to toggle "Select All" only for visible files.

## v3.5.0 (07 Apr 2025)
**Added**
* Dynamic `Accept-Language` header based on the user's system language, supporting Windows, Linux, and macOS.
* Dynamic `User-Agent` header using the `fake-useragent` library to always mimic a modern Chrome browser.
* Platform-specific locale detection using `ctypes` on Windows to accurately map LCIDs to language tags.
* Added a github workflow file to automate the building process.

**Changed**
* Updated the `User-Agent` header to use a recent Chrome version dynamically (previously hardcoded to Chrome 91).

**Dependencies**
* Added `fake-useragent` as a new dependency for dynamic User-Agent generation.

## v3.4.0 (06 Apr 2025)
* Integration of briefcase
* Added reset to defaults button for settings configuration
